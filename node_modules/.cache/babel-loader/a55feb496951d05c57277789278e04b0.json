{"ast":null,"code":"import _regeneratorRuntime from \"D:/HTML_CSS/popcorn-v3/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"D:/HTML_CSS/popcorn-v3/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _classCallCheck from \"D:/HTML_CSS/popcorn-v3/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"D:/HTML_CSS/popcorn-v3/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport axios from 'axios';\nimport MovieApi from './MovieApi';\nimport RssApi from './RssApi';\nvar _PATH_GET_EL = 'https://api-popcorn.herokuapp.com/api/web/build/';\n\nvar ElementApi = /*#__PURE__*/function () {\n  function ElementApi() {\n    _classCallCheck(this, ElementApi);\n  }\n\n  _createClass(ElementApi, null, [{\n    key: \"findName\",\n    value: function findName(name) {\n      return new Promise(function (resolve, reject) {\n        try {\n          axios.get(_PATH_GET_EL + name).then(function (res) {\n            var data = res.data;\n            resolve(data);\n          }).catch(function (err) {\n            reject(err);\n          });\n        } catch (error) {\n          console.log(error);\n        }\n      });\n    }\n    /**\r\n     * \r\n     * @param {String} elName \r\n     * Returning page elements:\r\n     *  Element:[_el_name]\r\n     * Movie: [_movie_name, _movie_id]\r\n     * Resource: [_rss ...{_id, _src, _movie_id}]\r\n     */\n\n  }, {\n    key: \"getPageElement\",\n    value: function () {\n      var _getPageElement = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(elName) {\n        var elInfo, movieId, srcId, movieInfo, resourceInfo, pageElement;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return this.findName(elName);\n\n              case 2:\n                elInfo = _context.sent;\n                movieId = elInfo[0]._movie_id;\n                srcId = elInfo[0]._src_id;\n                _context.next = 7;\n                return MovieApi.findId(movieId);\n\n              case 7:\n                movieInfo = _context.sent;\n                _context.next = 10;\n                return RssApi.findResource(srcId);\n\n              case 10:\n                resourceInfo = _context.sent;\n                pageElement = [{\n                  movie: movieInfo[0],\n                  element: elInfo[0],\n                  resource: resourceInfo[0]\n                }];\n                return _context.abrupt(\"return\", pageElement);\n\n              case 13:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function getPageElement(_x) {\n        return _getPageElement.apply(this, arguments);\n      }\n\n      return getPageElement;\n    }()\n  }]);\n\n  return ElementApi;\n}();\n\nexport default ElementApi;","map":{"version":3,"names":["axios","MovieApi","RssApi","_PATH_GET_EL","ElementApi","name","Promise","resolve","reject","get","then","res","data","catch","err","error","console","log","elName","findName","elInfo","movieId","_movie_id","srcId","_src_id","findId","movieInfo","findResource","resourceInfo","pageElement","movie","element","resource"],"sources":["D:/HTML_CSS/popcorn-v3/src/api/ElementApi.js"],"sourcesContent":["import axios from 'axios'\r\nimport MovieApi from './MovieApi'\r\nimport RssApi from './RssApi'\r\nconst _PATH_GET_EL = 'https://api-popcorn.herokuapp.com/api/web/build/'\r\n\r\nclass ElementApi{\r\n    static findName(name){\r\n        return  new Promise((resolve, reject)=>{\r\n            try{\r\n                axios.get(_PATH_GET_EL + name).then((res)=>{\r\n                    const data = res.data\r\n                    resolve(\r\n                        data\r\n                    )\r\n                }).catch(err=>{reject(err)})\r\n            }catch(error){\r\n                console.log(error)\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {String} elName \r\n     * Returning page elements:\r\n     *  Element:[_el_name]\r\n     * Movie: [_movie_name, _movie_id]\r\n     * Resource: [_rss ...{_id, _src, _movie_id}]\r\n     */\r\n    static async getPageElement(elName){\r\n        const elInfo = await this.findName(elName)\r\n        const movieId = elInfo[0]._movie_id\r\n        const srcId = elInfo[0]._src_id\r\n        \r\n        const movieInfo = await MovieApi.findId(movieId)\r\n\r\n        const resourceInfo = await RssApi.findResource(srcId)\r\n\r\n        const pageElement = [\r\n            {\r\n                movie: movieInfo[0],\r\n                element: elInfo[0],\r\n                resource: resourceInfo[0]\r\n            }\r\n        ]\r\n\r\n        return pageElement\r\n    }\r\n\r\n}\r\n\r\nexport default ElementApi"],"mappings":";;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,IAAMC,YAAY,GAAG,kDAArB;;IAEMC,U;;;;;;;WACF,kBAAgBC,IAAhB,EAAqB;MACjB,OAAQ,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAmB;QACnC,IAAG;UACCR,KAAK,CAACS,GAAN,CAAUN,YAAY,GAAGE,IAAzB,EAA+BK,IAA/B,CAAoC,UAACC,GAAD,EAAO;YACvC,IAAMC,IAAI,GAAGD,GAAG,CAACC,IAAjB;YACAL,OAAO,CACHK,IADG,CAAP;UAGH,CALD,EAKGC,KALH,CAKS,UAAAC,GAAG,EAAE;YAACN,MAAM,CAACM,GAAD,CAAN;UAAY,CAL3B;QAMH,CAPD,CAOC,OAAMC,KAAN,EAAY;UACTC,OAAO,CAACC,GAAR,CAAYF,KAAZ;QACH;MACJ,CAXO,CAAR;IAYH;IAED;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;;;;uFACI,iBAA4BG,MAA5B;QAAA;QAAA;UAAA;YAAA;cAAA;gBAAA;gBAAA,OACyB,KAAKC,QAAL,CAAcD,MAAd,CADzB;;cAAA;gBACUE,MADV;gBAEUC,OAFV,GAEoBD,MAAM,CAAC,CAAD,CAAN,CAAUE,SAF9B;gBAGUC,KAHV,GAGkBH,MAAM,CAAC,CAAD,CAAN,CAAUI,OAH5B;gBAAA;gBAAA,OAK4BvB,QAAQ,CAACwB,MAAT,CAAgBJ,OAAhB,CAL5B;;cAAA;gBAKUK,SALV;gBAAA;gBAAA,OAO+BxB,MAAM,CAACyB,YAAP,CAAoBJ,KAApB,CAP/B;;cAAA;gBAOUK,YAPV;gBASUC,WATV,GASwB,CAChB;kBACIC,KAAK,EAAEJ,SAAS,CAAC,CAAD,CADpB;kBAEIK,OAAO,EAAEX,MAAM,CAAC,CAAD,CAFnB;kBAGIY,QAAQ,EAAEJ,YAAY,CAAC,CAAD;gBAH1B,CADgB,CATxB;gBAAA,iCAiBWC,WAjBX;;cAAA;cAAA;gBAAA;YAAA;UAAA;QAAA;MAAA,C;;;;;;;;;;;;;AAsBJ,eAAezB,UAAf"},"metadata":{},"sourceType":"module"}